<!-- templates/index.html -->
<!doctype html>
<html lang='en'>
  <head>
    <meta charset='utf-8' />
    <meta name='viewport' content='width=device-width, initial-scale=1' />
    <title>ESSOSC Viewer</title>
    <link rel='stylesheet' href='https://unpkg.com/leaflet@1.9.4/dist/leaflet.css' />
    <script src='https://unpkg.com/leaflet@1.9.4/dist/leaflet.js'></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/proj4js/2.8.1/proj4.js'></script>
    <script src='https://unpkg.com/proj4leaflet@1.0.2/src/proj4leaflet.js'></script>
    <link rel='stylesheet' href='static/style.css' />
  </head>
  <body>
    <header>
      <div class='brand'>ESSOSC Viewer</div>
      <div class='controls'>
        <div class='win-size'>
          <label for='windowSize'>Window Size (km)</label>
          <input id='windowSize' type='range' min='0' max='100' step='1' />
          <input id='windowSizeNumber' class='num' type='number' min='1' max='1000' step='1' value='200' />
        </div>
        <div class='selectors'>
          {% for layer_id in ['A', 'B'] %}
          <div class='layer-control'>
            <label for='layerSelect{{ layer_id }}'>Layer {{ layer_id }}</label>
            <div class='layer-inputs'>
              <select id='layerSelect{{ layer_id }}'></select>
              <label class='vis-label'>
                <input id='layerVisible{{ layer_id }}' type='checkbox' checked />
                <span>Show</span>
              </label>
            </div>
          </div>
          {% endfor %}
        </div>
        <div class='flip-col'>
          <button id='flipLayersBtn' class='btn'>Swap A - B</button>
          <button id='bothLayersOnBtn' class='btn'>Both on</button>
          <div class='rule'></div>
          <button id='applyAutoStyleBtn' class='btn'>Set Min/Med/Max from Histogram</button>
        </div>
        <div class='style-panels'>
          {% for layer_id in ['A', 'B'] %}
          <div class='style-panel'>
            <summary>Style {{ layer_id }}</summary>
            <div class='style-grid'>
              <label>Min <input id='layer{{ layer_id }}MinInput' type='number' step='any' /></label>
              <label>Med <input id='layer{{ layer_id }}MedInput' type='number' step='any' /></label>
              <label>Max <input id='layer{{ layer_id }}MaxInput' type='number' step='any' /></label>
              <label>Color min <input id='layer{{ layer_id }}CminInput' type='color'/></label>
              <label>Color med <input id='layer{{ layer_id }}CmedInput' type='color'/></label>
              <label>Color max <input id='layer{{ layer_id }}CmaxInput' type='color'/></label>
            </div>
          </div>
          {% endfor %}
        </div>
      </div>
    </header>
    <main>
      <section id='map'>
        <div id='statsOverlay' class='overlay hidden'>
          <div class='overlay-header'>
            <span>Area sampler</span>
            <button id='overlayClose' title='Close'>&times;</button>
          </div>
          <div id='overlayBody' class='overlay-body'></div>
        </div>
      </section>
    </main>
    <script src='static/app.js'></script>
  </body>
</html>
